<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Crop Disease - IoT Smart Farming</title>
    {% include './includes/header.html' %}
    <style>
    .loader {
        border: 8px solid #f3f3f3; /* Light grey */
        border-top: 8px solid #3498db; /* Blue */
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 2s linear infinite;
    }
        
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    </style>
</head>

<body>
    {% include './includes/navbar.html' %}
    <main class="page blog-post-list">
        <section class="clean-block clean-blog-list dark">
            <div class="container">
                <div class="block-heading" style="padding-top: 40px;">
                    <h2>Crop Disease</h2>
                </div>
                <div class="block-content">
                    <div class="clean-blog-post">
                        <!--iframe src ="http://192.168.250.45/" height="700" width="400"></iframe-->
                        <div class="row">
                            <div class="col-xxl-6"><video autoplay width="500"></video></div>
                            <div class="col-xxl-6 offset-xxl-0">
                                <h3>Lorem Ipsum dolor sit amet</h3>
                                <p style="text-align: justify;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc quam urna, dignissim nec auctor in, mattis vitae leo. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc quam urna, dignissim nec auctor in, mattis vitae leo.</p>
                                <div class="d-grid">
                                    {% if msg %} <div class="alert alert-danger" role="alert"><span><strong>* </strong>Invalid. Please re-upload the image.</span></div> {% endif %}
                                    <a class="btn btn-success btn-sm" role="button" href="#uploadModal" data-bs-toggle="modal">Upload</a>
                                    <br>
                                    <a class="btn btn-secondary btn-sm" role="button" href="/result">Capture</a>
                                </div>
                                <!-- Start Modal -->
                                <div id="uploadModal" class="modal fade">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title">Upload Image</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                            </div>
                                            <form method="post" enctype="multipart/form-data">
                                                <div class="modal-body">
                                                    <p>Upload image here (Max: 2MB)</p>
                                                    <p><input type="file" name="uploadImage" id="uploadImage"></p>
                                                    <div class="progress-loader d-none d-flex ">
                                                        <div class="loader"></div>
                                                        <p class="mt-auto mb-auto">Please wait a few minutes before you try again.</p>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                                    <button type="submit" class="btn btn-success" id="upload">Upload</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <!-- End Modal -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer class="page-footer dark" style="padding-top: 0px;">
        <div class="footer-copyright" style="margin-top: 0px;">
            <p>Â© 2021 IoT Smart Farming</p>
        </div>
    </footer>
    {% include './includes/footer.html' %}
    <script>
        const constraints = {
          video: true,
        };
        
        const video = document.querySelector("video");
        
        navigator.mediaDevices.getUserMedia(constraints).then((stream) => {
          video.srcObject = stream;
        });

        const btnupload = document.querySelector("#upload");
        btnupload.addEventListener('click', function(event){
            document.querySelector(".progress-loader").classList.remove('d-none');
        })

        </script>
</body>

</html>